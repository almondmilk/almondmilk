<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <?php session_start(); ?>
    <title>SFSU CS Department - CSC 642 Fall 2016 project: Form UI Alvin Lu alvinlu@mail.sfsu.edu</title>
    <link rel="stylesheet" href="/vendor/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="/dist/css/bootstrapValidator.css" />

    <!-- Include the FontAwesome CSS if you want to use feedback icons provided by FontAwesome -->
    <!--<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />-->
    <link class="jsbin" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js" rel="stylesheet" type="text/css" />
    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/vendor/jquery/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/dist/js/bootstrapValidator.js"></script>
    <script type="text/javascript" src="/dist/js/photo.js"></script>

    <style>
        article,
        aside,
        figure,
        footer,
        header,
        hgroup,
        menu,
        nav,
        section {
            display: block;
        }
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #map {
          height: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
        }
        #floating-panel {
          position: absolute;
          top: 10px;
          left: 25%;
          z-index: 5;
          background-color: #fff;
          padding: 5px;
          border: 1px solid #999;
          text-align: center;
          font-family: 'Roboto','sans-serif';
          line-height: 30px;
          padding-left: 10px;
        }

    </style>

</head>

<body>
    <script LANGUAGE="JavaScript">

        function getParams() {
            var idx = document.URL.indexOf('?');
            var params = new Array();
            if (idx != -1) {
                var pairs = document.URL.substring(idx + 1, document.URL.length).split('&');
                for (var i = 0; i < pairs.length; i++) {
                    nameVal = pairs[i].split('=');
                    params[nameVal[0]] = nameVal[1];
                }
            }
            return params;
        }

        params = getParams();

        var firstname = decodeURI(params["firstName"]);
        var replacedFirstName = firstname.replace(/%2D/g, "-");
        var replacedFirstName = replacedFirstName.replace(/%2C/g, "'");
        var replacedFirstName = replacedFirstName.split('+').join(' ');

        var lastname = decodeURI(params["lastName"]);
        var replacedLastName = lastname.replace(/%2D/g, "-");
        var replacedLastName = replacedLastName.replace(/%2C/g, "'");
        var replacedLastName = replacedLastName.split('+').join(' ');

        var gender = decodeURI(params["gender"]);

        var education = decodeURI(params["education"]);
        var replacedEducation = education.split('+').join(' ');

        var phone = decodeURI(params["phoneNumber"]);


        var email = decodeURI(params["email"]);
        var replacedEmail = email.split('%40').join('@');

        var date = decodeURI(params["date"]);
        var replacedDate = date.replace(/%2F/g, "/");

        var street = decodeURI(params["street"]);
        var replacedStreet = street.split('+').join(' ');
        var replacedStreet = replacedStreet.replace(/%2D/g,"-");
        var replacedStreet = replacedStreet.replace(/%2C/g,"'");
        var replacedStreet = replacedStreet.replace(/%2B/g," ");

        var city = decodeURI(params["city"]);
        var replacedCity = city.split('+').join(' ');
        var replacedCity = replacedCity.replace(/%2D/g,"-");
        var replacedCity = replacedCity.replace(/%2C/g,"'");
        var replacedCity = replacedCity.replace(/%2B/g," ");

        var state = decodeURI(params["state"]);
        var replacedState = state.split('+').join(' ');

        var zipcode = decodeURI(params["zipCode"]);
        var replacedZipCode = zipcode.replace(/%2D/g,"-");

        var category = decodeURI(params["category"]);
        var replacedCategory = category.split('+').join(' ');

        var comment = decodeURI(params["comment"]);
        var replacedComment = comment.split('+').join(' ');
        var replacedComment = replacedComment.replace(/%2C/g, ",");

        var terms = decodeURI(params["terms"]);
        var replacedTerms = terms.replace("on","Accepted");

        var images = decodeURI(params["imageHolder"]);

    </script>

    <div class="col-xs-8 col-xs-offset-2">

        <div class="page-header">
            <h2 style='text-align: center;'>Form Results</h2>
        </div>

        <div class="page-header">
            <h4 style='text-align: left;'>Personal Information</h4>
        </div>

        <!-- first name -->
        <div class="row">
            <label class="col-xs-3 control-label">First Name</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedFirstName);</script>
            </label>
        </div>

        <!--  last name -->
        <div class="row">
            <label class="col-xs-3 control-label">Last Name</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedLastName);</script>
            </label>
        </div>

        <!-- gender -->
        <div class="row">
            <label class="col-xs-3 control-label">Gender</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(gender);</script>
            </label>
        </div>

        <!-- education -->
        <div class="row">
            <label class="col-xs-3 control-label">Highest Education</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedEducation);</script>
            </label>
        </div>

        <!-- phone number -->
        <div class="row">
            <label class="col-xs-3 control-label">Phone Number</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(phone);</script>
            </label>
        </div>

        <!-- email -->
        <div class="row">
            <label class="col-xs-3 control-label">Email Address</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedEmail);</script>
            </label>
        </div>

        <!-- date -->
        <div class="row">
            <label class="col-xs-3 control-label">Date</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedDate);</script>
            </label>
        </div>

        <div class="page-header">
            <h4 style='text-align: left;'>Location</h4>
        </div>

        <!--  street -->
        <div class="row">
            <label class="col-xs-3 control-label">Street</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedStreet);</script>
            </label>
        </div>

        <!-- city -->
        <div class="row">
            <label class="col-xs-3 control-label">City</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedCity);</script>
            </label>
        </div>

        <!-- state -->
        <div class="row">
            <label class="col-xs-3 control-label">State</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedState);</script>
            </label>
        </div>

        <!-- zip code -->
        <div class="row">
            <label class="col-xs-3 control-label">Zip Code</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedZipCode);</script>
            </label>
        </div>

        <!-- category -->
        <div class="row">
            <label class="col-xs-3 control-label">Category</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedCategory);</script>
            </label>
        </div>

        <!-- comment -->
        <div class="row">
            <label class="col-xs-3 control-label">Comment</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedComment);</script>
            </label>
        </div>


        <div class="page-header">
            <h4 style='text-align: left;'>Terms and Agreement</h4>
        </div>

        <!-- terms -->
        <div class="row">
            <label class="col-xs-3 control-label">Terms and Agreement</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write(replacedTerms);</script>
            </label>
        </div>

        <div class="page-header">
            <h4 style='text-align: left;'>Captcha</h4>
        </div>

        <!-- captcha -->
        <div class="row">
            <label class="col-xs-3 control-label">Captcha</label>
            <label class="col-xs-4 control-label">
                <script LANGUAGE="JavaScript">document.write("Verified");</script>
            </label>
        </div>

        <div class="row">
            <label class="col-xs-3 control-label">Google Maps</label>
            <label class="col-xs-4 control-label">

              <div id="map" style="width:400px;height:400px;background:white"></div>
            </label>
        </div>

    </div>
    <!-- <div id="floating-panel">
      <input id="address" type="textbox" value="Sydney, NSW">
      <input id="submit" type="button" value="Geocode">
    </div> -->

    <script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 15,
          center: {lat: -34.397, lng: 150.644}
        });
        var geocoder = new google.maps.Geocoder();
        //var address = '3654 Baldwin Hills Court South San Francisco';
        var address = replacedStreet + replacedCity;
        geocodeAddress(geocoder, map, address)
        // document.getElementById('submit').addEventListener('click', function() {
        //   geocodeAddress(geocoder, map);
        // });
      }

      function geocodeAddress(geocoder, resultsMap, address) {
        //var address = document.getElementById('address').value;
        //address = '3654 Baldwin Hills Court South San Francisco';
        geocoder.geocode({'address': address}, function(results, status) {
          if (status === 'OK') {
            resultsMap.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
              map: resultsMap,
              position: results[0].geometry.location
            });
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5UB-333Aqb-x4CWxmqShkuy91KzSRxSM&callback=initMap" async defer></script>
</body>

</html>
